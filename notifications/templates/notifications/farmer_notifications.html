{% extends 'accounts/base.html' %}
{% block title %}Farmer Notifications - AgriLeader{% endblock %}

{% block content %}
<h2>Your Notifications</h2>

<div class="list-group">
    {% for notif in notifications %}
    <div class="list-group-item d-flex justify-content-between align-items-start 
                {% if notif.is_read %}list-group-item-secondary{% else %}list-group-item-primary{% endif %}">
        
        <div class="ms-2 me-auto">
            <div class="fw-bold">{{ notif.title }}</div>
            <p class="mb-1">{{ notif.message|truncatewords:20 }}</p>
            <small class="text-muted">{{ notif.created_at|date:"Y-m-d H:i" }}</small>
        </div>

        <div class="text-end">
            {% if not notif.is_read %}
                <span class="badge bg-primary rounded-pill mb-2">New</span><br>
                <a href="{% url 'notifications:mark_read' notif.id %}" 
                   class="btn btn-sm btn-outline-secondary">Mark Read</a>
            {% else %}
                <a href="{% url 'notifications:mark_read' notif.id %}" 
                   class="btn btn-sm btn-outline-secondary disabled" aria-disabled="true">Read</a>
            {% endif %}
        </div>
    </div>
    {% empty %}
        <p class="p-3 text-muted">No notifications.</p>
    {% endfor %}
</div>
{% endblock %}
